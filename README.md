<h1>Проект: Инструмент визуализации графа зависимостей пакетов</h1>

<p><b>Общее описание:</b><br>
Данный проект реализует <b>инструмент для анализа и визуализации графов зависимостей</b> пакетов в формате Ubuntu APT. 
Программа предоставляет полный цикл работы с зависимостями: от сбора данных до продвинутой визуализации в различных форматах.<br>
Проект демонстрирует работу с графами, алгоритмы обхода (BFS с рекурсией), обработку циклических зависимостей, 
а также реализацию гибкой конфигурационной системы и CLI-интерфейса.</p>

<p>Система состоит из пяти основных этапов разработки:</p>
<ul>
<li><b>Этап 1</b> — базовая конфигурация и обработка ошибок;</li>
<li><b>Этап 2</b> — сбор данных о зависимостях пакетов;</li>
<li><b>Этап 3</b> — построение полного графа зависимостей с транзитивностью;</li>
<li><b>Этап 4</b> — анализ обратных зависимостей;</li>
<li><b>Этап 5</b> — визуализация графов в различных форматах.</li>
</ul>

<hr>

<h2>Описание всех функций и настроек</h2>

<h3>Основные компоненты системы</h3>

<p><b>Config</b> — управление конфигурацией через TOML-файлы:</p>
<ul>
<li>Загрузка и валидация параметров</li>
<li>Обработка ошибок конфигурации</li>
<li>Поддержка всех этапов разработки</li>
</ul>

<p><b>DependencyAnalyzer</b> — ядро анализа зависимостей:</p>
<ul>
<li>BFS с рекурсией для построения графов</li>
<li>Обнаружение и обработка циклических зависимостей</li>
<li>Анализ прямых и транзитивных зависимостей</li>
<li>Построение обратных зависимостей</li>
</ul>

<p><b>ASCIIVisualizer</b> — текстовая визуализация:</p>
<ul>
<li>Генерация ASCII-деревьев зависимостей</li>
<li>Форматирование иерархии</li>
<li>Поддержка сложных древовидных структур</li>
</ul>

<p><b>GraphvizVisualizer</b> — графическая визуализация:</p>
<ul>
<li>Генерация DOT-кода для Graphviz</li>
<li>Создание файлов .dot для визуализации</li>
<li>Поддержка различных стилей графов</li>
</ul>

<h3>Конфигурационные параметры</h3>

<p>Все настройки определяются в файле <code>config.toml</code>:</p>

<pre>
package_name = "A"                    # Имя анализируемого пакета
repository_url = ""                   # URL репозитория
test_repository_mode = true           # Режим тестового репозитория
ascii_tree_output = true              # Вывод в формате ASCII-дерева
reverse_dependencies_mode = false     # Режим обратных зависимостей
graphviz_output = true                # Генерация Graphviz DOT-кода
</pre>

<h3>Функциональность по этапам</h3>

<h4>Этап 1: Минимальный прототип с конфигурацией</h4>
<ul>
<li>Чтение конфигурации из TOML-файлов</li>
<li>Валидация всех параметров конфигурации</li>
<li>Вывод параметров в формате ключ-значение</li>
<li>Обработка ошибок конфигурации</li>
</ul>

<h4>Этап 2: Сбор данных</h4>
<ul>
<li>Извлечение информации о прямых зависимостях</li>
<li>Поддержка формата пакетов Ubuntu (APT)</li>
<li>Работа с тестовыми данными (пакеты A, B, C...)</li>
<li>Вывод списка прямых зависимостей</li>
</ul>

<h4>Этап 3: Основные операции</h4>
<ul>
<li>Построение полного графа зависимостей алгоритмом BFS с рекурсией</li>
<li>Учет транзитивных зависимостей</li>
<li>Обнаружение и обработка циклических зависимостей</li>
<li>Генерация ASCII-деревьев для визуализации</li>
</ul>

<h4>Этап 4: Дополнительные операции</h4>
<ul>
<li>Анализ обратных зависимостей (пакеты, зависящие от заданного)</li>
<li>Построение полного графа обратных зависимостей</li>
<li>BFS с рекурсией для обратного графа</li>
<li>Демонстрация для различных пакетов</li>
</ul>

<h4>Этап 5: Визуализация</h4>
<ul>
<li>Генерация текстового представления на языке Graphviz DOT</li>
<li>Создание файлов .dot для визуализации</li>
<li>Сравнение результатов со штатными инструментами менеджеров пакетов</li>
<li>Демонстрация для трех различных пакетов</li>
</ul>

<hr>

<h2>Описание команд для сборки проекта и запуска тестов</h2>

<h3>Требования к системе</h3>
<ul>
<li>Python 3.6 или выше</li>
<li>Установленная библиотека toml</li>
<li>Graphviz (опционально, для генерации изображений)</li>
</ul>

<h3>Установка зависимостей</h3>

<pre>
pip install toml
</pre>

<h3>Запуск программы</h3>

<pre>
# Основной запуск с конфигурацией по умолчанию
python pr2.py

# Запуск с указанием конфигурационного файла
python pr2.py --config config.toml

# Создание примерного конфигурационного файла
python pr2.py --create-sample

# Демонстрация всех функций этапа 5
python pr2.py --demo-all
</pre>

<h3>Создание тестовых данных</h3>

<pre>
# Программа автоматически использует встроенные тестовые данные
# Для создания файлов тестового репозитория используйте:
python pr2.py --create-test-repo
</pre>

<hr>

<h2>Примеры использования</h2>

<h3>Пример 1: Анализ зависимостей пакета A</h3>

<pre>
# config.toml
package_name = "A"
test_repository_mode = true
ascii_tree_output = true
graphviz_output = true

# Запуск
python pr2.py

# Результат:
Complete dependency graph for 'A':
  A: ['B', 'C']
  B: ['D', 'E']
  D: ['H']
  H: []
  E: ['H', 'I']
  I: []
  C: ['F', 'G']
  F: []
  G: ['I']

ASCII Tree:
└── A
    ├── B
    │   ├── D
    │   │   └── H
    │   └── E
    │       ├── H
    │       └── I
    └── C
        ├── F
        └── G
            └── I
</pre>

<h3>Пример 2: Анализ обратных зависимостей пакета H</h3>

<pre>
# config.toml
package_name = "H"
test_repository_mode = true
reverse_dependencies_mode = true
ascii_tree_output = true

# Результат:
Direct reverse dependencies for 'H':
  1. D
  2. E
  3. M

Complete reverse dependency graph for 'H':
  H: ['D', 'E', 'M']
  D: ['B']
  B: ['A', 'K']
  A: ['J']
  J: []
  K: []
  E: ['B']
  M: ['L']
  L: []
</pre>

<h3>Пример 3: Генерация Graphviz DOT-кода</h3>

<pre>
# config.toml
package_name = "A"
test_repository_mode = true
graphviz_output = true

# Создается файл A_dependencies.dot:
digraph Dependencies {
    rankdir=TB;
    node [shape=box, style=filled, fillcolor=lightblue];
    "A" [fillcolor=orange];
    "A" -> "B";
    "A" -> "C";
    "B" -> "D";
    "B" -> "E";
    "D" -> "H";
    "E" -> "H";
    "E" -> "I";
    "C" -> "F";
    "C" -> "G";
    "G" -> "I";
}
</pre>

<h3>Пример 4: Обнаружение циклических зависимостей</h3>

<pre>
# Программа автоматически тестирует циклические зависимости
Circular dependency detected: X -> Y -> Z -> X
Graph building stopped due to circular dependency.
</pre>

<hr>

<h2>Сравнение с штатными инструментами</h2>

<p>Программа предоставляет расширенную функциональность по сравнению со стандартными инструментами менеджеров пакетов:</p>

<ul>
<li><b>Полный граф зависимостей</b> — в отличие от <code>apt-cache depends</code>, который показывает только прямые зависимости</li>
<li><b>Транзитивные зависимости</b> — автоматическое вычисление всех уровней вложенности</li>
<li><b>Обратные зависимости</b> — поиск пакетов, зависящих от заданного</li>
<li><b>Визуализация</b> — генерация ASCII-деревьев и Graphviz DOT-кода</li>
<li><b>Обнаружение циклов</b> — автоматическое выявление циклических зависимостей</li>
</ul>

<p>Различия в результатах объясняются использованием тестовых данных (пакеты A, B, C...) вместо реальных пакетов Ubuntu, что позволяет демонстрировать алгоритмы без зависимости от внешних репозиториев.</p>

</body>
</html>
